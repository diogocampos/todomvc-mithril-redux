!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},o={},r={},n={}.hasOwnProperty,i=function(t,e){var o=r[t]||r[t+"/index.js"];return o||t},s=/^\.\.?(\/|$)/,u=function(t,e){for(var o,r=[],n=(s.test(e)?t+"/"+e:e).split("/"),i=0,u=n.length;u>i;i++)o=n[i],".."===o?r.pop():"."!==o&&""!==o&&r.push(o);return r.join("/")},l=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(o){var r=u(l(e),o);return t.require(r,e)}},a=function(t,e){var r={id:t,exports:{}};return o[t]=r,e(r.exports,c(t),r),r.exports},d=function(t,r){null==r&&(r="/");var s=i(t,r);if(n.call(o,s))return o[s].exports;if(n.call(e,s))return a(s,e[s]);var l=u(s,"./index");if(n.call(o,l))return o[l].exports;if(n.call(e,l))return a(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+r+'"')};d.alias=function(t,e){r[e]=t},d.register=d.define=function(t,o){if("object"==typeof t)for(var r in t)n.call(t,r)&&d.register(r,t[r]);else e[t]=o},d.list=function(){var t=[];for(var o in e)n.call(e,o)&&t.push(o);return t},d.brunch=!0,d._cache=o,t.require=d}}(),require.register("components/todo-app",function(t,e,o){"use strict";var r,n,i,s,u,l,c,a,d,h,f,g,p;h=e("mithril"),u=e("../redux").bindActionCreators,i=e("./todo-input"),s=e("./todo-item"),l=e("./utils").createComponent,f=e("../state/root").selectors,c=e("../state/filter").filterActions,p=e("../state/todos").todosActions,r={all:{path:"/",label:"All"},active:{path:"/active",label:"Active"},completed:{path:"/completed",label:"Completed"}},o.exports=l(n=function(){function t(t){var e,o;e=t.dispatch,o=h.route.param("filter"),"active"!==o&&"completed"!==o&&(o&&h.route("/"),o="all"),e(c.setFilter(o)),this.actions=u(p,e)}return t.prototype.render=function(t){var e,o,r;return e=t.getState,o=e(),r=f.getTodos(o),h("div",[d({title:"todos"},h(i,{onSubmit:this.actions.createTodo})),r.length>0?[g({state:o,actions:this.actions}),a({state:o,actions:this.actions})]:void 0])},t}()),d=function(t,e){var o;return o=t.title,h("header.header",[h("h1",o),e])},g=function(t){var e,o,r,n,i;return r=t.state,e=t.actions,o=f.hasActiveTodos(r),i=f.getVisibleTodos(r),h("section.main",[h("input#toggle-all.toggle-all",{type:"checkbox",checked:!o,onchange:e.toggleAllTodos}),h("label",{"for":"toggle-all"},"Mark all as complete"),h("ul.todo-list",function(){var t,o,r;for(r=[],t=0,o=i.length;o>t;t++)n=i[t],r.push(h(s,{todo:n,onToggle:e.toggleTodo,onRename:e.renameTodo,onDestroy:e.destroyTodo}));return r}())])},a=function(t){var e,o,n,i,s,u,l;return l=t.state,e=t.actions,s=f.getFilter(l),o=f.getActiveTodos(l),i=f.getCompletedTodos(l),h("footer.footer",[h("span.todo-count",[h("strong",o.length),1===o.length?" item left":" items left"]),h("ul.filters",function(){var t;t=[];for(u in r)n=r[u],t.push(h("li",[h("a",{"class":u===s?"selected":void 0,href:n.path,config:h.route},n.label)]));return t}()),i.length>0?h("button.clear-completed",{onclick:e.destroyCompletedTodos},"Clear completed"):void 0])}}),require.register("components/todo-input",function(t,e,o){"use strict";var r,n,i,s,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}};s=e("mithril"),l=e("./utils"),i=l.createComponent,r=l.KeyCode,u=l.mx,o.exports=i(n=function(){function t(t){this.onSubmit=t.onSubmit,this.handleKeydown=c(this.handleKeydown,this),this.title=s.prop("")}return t.prototype.handleKeydown=function(t){var e;return t.keyCode===r.ENTER&&(e=this.title().trim())?(this.onSubmit(e),this.title("")):void 0},t.prototype.render=function(t){return this.onSubmit=t.onSubmit,u("input.new-todo",{placeholder:"What needs to be done?",autofocus:!0,binds:["oninput","value",this.title],onkeydown:this.handleKeydown})},t}())}),require.register("components/todo-item",function(t,e,o){"use strict";var r,n,i,s,u,l,c,a=function(t,e){return function(){return t.apply(e,arguments)}};s=e("mithril"),l=e("./utils"),i=l.createComponent,r=l.KeyCode,u=l.mx,o.exports=i(n=function(){function t(t){this.todo=t.todo,this.onToggle=t.onToggle,this.onRename=t.onRename,this.onDestroy=t.onDestroy,this.handleBlur=a(this.handleBlur,this),this.handleKeydown=a(this.handleKeydown,this),this.handleDblclick=a(this.handleDblclick,this),this.handleDestroy=a(this.handleDestroy,this),this.handleToggle=a(this.handleToggle,this),this.title=s.prop(""),this.editing=s.prop(!1)}return t.prototype.handleToggle=function(){return this.onToggle(this.todo.id)},t.prototype.handleDestroy=function(){return this.onDestroy(this.todo.id)},t.prototype.handleDblclick=function(){return this.title(this.todo.title),this.editing(!0)},t.prototype.handleKeydown=function(t){switch(t.keyCode){case r.ENTER:return this.commitChanges();case r.ESCAPE:return this.discardChanges()}},t.prototype.handleBlur=function(){return this.commitChanges()},t.prototype.commitChanges=function(){var t;return this.editing(!1),(t=this.title().trim())?t!==this.todo.title?this.onRename(this.todo.id,t):void 0:this.onDestroy(this.todo.id)},t.prototype.discardChanges=function(){return this.title(this.todo.title),this.editing(!1)},t.prototype.render=function(t){var e;return this.todo=t.todo,this.onToggle=t.onToggle,this.onRename=t.onRename,this.onDestroy=t.onDestroy,e="",this.editing()&&(e+=".editing"),this.todo.completed&&(e+=".completed"),s("li"+e,{key:this.todo.id},[this.editing()?u("input.edit",{config:c,binds:["oninput","value",this.title],onblur:this.handleBlur,onkeydown:this.handleKeydown}):s("div.view",[s("input.toggle",{type:"checkbox",checked:this.todo.completed,onchange:this.handleToggle}),s("label",{ondblclick:this.handleDblclick},this.todo.title),s("button.destroy",{onclick:this.handleDestroy})])])},t}()),c=function(t,e,o){return e?void 0:t.select()}}),require.register("components/utils",function(t,e,o){"use strict";var r;r=e("mithril"),o.exports={KeyCode:{ENTER:13,ESCAPE:27},createComponent:function(){var t;return t=function(t){return{controller:function(e,o){return new t(e,o)},view:function(t,e,o){return t.render(e,o)}}}}(),mx:function(){var t,e;return t={binds:function(t){var e,o,n,i;return i=t.binds,n=i[0],e=i[1],o=i[2],t[e]=o(),t[n]=r.withAttr(e,o),delete t.binds}},e=function(e,o,n){var i,s;for(i in t)s=t[i],null!=o[i]&&s(o);return r(e,o,n)}}()}}),require.register("main",function(t,e,o){"use strict";var r,n,i,s,u,l;s=e("mithril"),r=e("./components/todo-app"),i=e("./state/store").configureStore,l=i(),u=document.getElementById("todoapp"),n=s.component(r,l),s.route.mode="hash",s.route(u,"/",{"/":n,"/:filter":n})}),require.register("redux",function(t,e,o){o.exports=e("redux/dist/redux.min")}),require.register("state/filter",function(t,e,o){"use strict";var r,n;r=e("./utils").createAction,t.filterActions={setFilter:r("SET_FILTER","filter")},n="all",t.filterReducer=function(t,e){switch(null==t&&(t=n),e.type){case"SET_FILTER":return e.filter;default:return t}},t.filterSelectors={getFilter:function(t){return t}}}),require.register("state/root",function(t,e,o){"use strict";var r,n,i,s,u,l,c,a;r=e("../redux").combineReducers,s=e("./filter"),n=s.filterReducer,i=s.filterSelectors,u=e("./todos"),c=u.todosReducer,a=u.todosSelectors,t.reducer=r({filter:n,todos:c}),t.configureState=function(t){var e;return e=t.todos,{filter:n(void 0,{}),todos:c(e,{})}},t.selectors=l={},l.getFilter=function(t){return i.getFilter(t.filter)},l.getTodos=function(t){return a.getTodos(t.todos)},l.getActiveTodos=function(t){var e;return e=l.getTodos(t),a.getActiveTodos(e)},l.getCompletedTodos=function(t){var e;return e=l.getTodos(t),a.getCompletedTodos(e)},l.getVisibleTodos=function(t){switch(l.getFilter(t)){case"all":return l.getTodos(t);case"active":return l.getActiveTodos(t);case"completed":return l.getCompletedTodos(t)}},l.hasActiveTodos=function(t){var e;return e=l.getTodos(t),a.hasActiveTodos(e)}}),require.register("state/storage",function(t,e,o){"use strict";var r,n;r="redux-state",n=function(t){return t},t.attachStorage=function(t){var e,o,i,s,u,l,c,a;return c=null!=(i=t.storage)?i:window.localStorage,o=null!=(s=t.key)?s:r,e=null!=(u=t.fromStorage)?u:n,a=null!=(l=t.toStorage)?l:n,function(t){return function(r,n){var i,s,u,l,d;return s=c.getItem(o),null!=s?(u=JSON.parse(s),i=e(u)):(u=null,i=n),d=t(r,i),d.subscribe(l=function(){var t,e,r;if(r=a(d.getState()),r!==u){u=r;try{return c.setItem(o,JSON.stringify(r))}catch(e){return t=e,console.error("Can't save",t)}}}),d}}}}),require.register("state/store",function(t,e,o){"use strict";var r,n,i,s,u,l,c;u=e("../redux"),r=u.applyMiddleware,i=u.compose,s=u.createStore,c=e("redux-thunk")["default"],l=e("./root"),n=e("./storage").attachStorage,t.configureStore=function(){var t;return t=l.reducer(void 0,{}),s(l.reducer,t,i(n({key:"todos-mithril-redux",fromStorage:function(t){return l.configureState({todos:t})},toStorage:l.selectors.getTodos}),r(c)))}}),require.register("state/todos",function(t,e,o){"use strict";var r,n,i,s,u,l,c,a,d,h,f;u=e("reselect").createSelector,a=e("./utils"),s=a.createAction,h=a.setItem,f=a.setProperties,n=a.UUIDv4,t.Todo=r=function(t,e){return{id:n(),title:t,completed:null!=e?!!e:!1}},r.isActive=function(t){return!t.completed},r.isCompleted=function(t){return t.completed},t.todosActions={createTodo:function(){var t;return t=s("ADD_TODO","todo"),function(e,o){return function(n){return n(t(r(e,o)))}}}(),toggleTodo:s("TOGGLE_TODO","id"),renameTodo:s("RENAME_TODO","id","title"),destroyTodo:s("DESTROY_TODO","id"),toggleAllTodos:s("TOGGLE_ALL_TODOS"),destroyCompletedTodos:s("DESTROY_COMPLETED_TODOS")},c=function(){var t,e,o,n;for(o=[["Taste JavaScript",!0],["Buy a unicorn",!1]],n=[],t=0,e=o.length;e>t;t++)i=o[t],n.push(r.apply(null,i));return n}(),t.todosReducer=function(t,e){var o,r,n,i,s,u;return null==t&&(t=c),i=function(){var i,c;switch(e.type){case"ADD_TODO":return t.concat([e.todo]);case"TOGGLE_TODO":if(i=l(t,e.id),s=i[0],n=i[1],s)return s=f(s,{completed:!s.completed}),h(t,n,s);break;case"RENAME_TODO":if(c=l(t,e.id),s=c[0],n=c[1],s&&e.title!==s.title)return s=f(s,{title:e.title}),h(t,n,s);break;case"DESTROY_TODO":if(u=t.filter(function(t){return t.id!==e.id}),u.length<t.length)return u;break;case"TOGGLE_ALL_TODOS":if(t.length>0)return r=d.hasActiveTodos(t),t.map(function(t){return f(t,{completed:r})});break;case"DESTROY_COMPLETED_TODOS":if(o=d.getActiveTodos(t),o.length<t.length)return o}}(),i||t},l=function(t,e){var o,r,n,i;for(r=o=0,n=t.length;n>o;r=++o)if(i=t[r],i.id===e)return[i,r];return[null,-1]},t.todosSelectors=d={},d.getTodos=function(t){return t},d.getActiveTodos=u([d.getTodos],function(t){return t.filter(r.isActive)}),d.getCompletedTodos=u([d.getTodos],function(t){return t.filter(r.isCompleted)}),d.hasActiveTodos=function(t){var e;return e=d.getActiveTodos(t),e.length>0}}),require.register("state/utils",function(t,e,o){"use strict";var r=[].slice;o.exports={createAction:function(){var t,e;return e=arguments[0],t=2<=arguments.length?r.call(arguments,1):[],function(){var o,n,i,s,u,l;for(l=1<=arguments.length?r.call(arguments,0):[],o={type:e},i=n=0,u=t.length;u>n;i=++n)s=t[i],o[s]=l[i];return o}},setItem:function(t,e,o){return t=t.slice(),t[e]=o,t},setProperties:function(t,e,o){var r;return null!=o?(r={},r[e]=o):r=e,Object.assign({},t,r)},UUIDv4:function(){var t,e,o,r;return e=[8,4,4,4,12],r=2,o=3,t=function(){var t,n,i,s,u;return u=function(){var u,l,c;for(c=[],i=u=0,l=e.length;l>u;i=++u)s=e[i],n=crypto.getRandomValues(new Uint8Array(s)),i===r&&(n[0]=4),i===o&&(n[0]=8+n[0]%4),c.push(function(){var e,o,r;for(r=[],e=0,o=n.length;o>e;e++)t=n[e],r.push((t%16).toString(16));return r}().join(""));return c}(),u.join("-")}}()}}),require("main");