!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},o={},n={}.hasOwnProperty,i=function(t,e){var r=o[t]||o[t+"/index.js"];return r||t},s=/^\.\.?(\/|$)/,u=function(t,e){for(var r,o=[],n=(s.test(e)?t+"/"+e:e).split("/"),i=0,u=n.length;u>i;i++)r=n[i],".."===r?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},l=function(t){return t.split("/").slice(0,-1).join("/")},c=function(e){return function(r){var o=u(l(e),r);return t.require(o,e)}},a=function(t,e){var o={id:t,exports:{}};return r[t]=o,e(o.exports,c(t),o),o.exports},d=function(t,o){null==o&&(o="/");var s=i(t,o);if(n.call(r,s))return r[s].exports;if(n.call(e,s))return a(s,e[s]);var l=u(s,"./index");if(n.call(r,l))return r[l].exports;if(n.call(e,l))return a(l,e[l]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')};d.alias=function(t,e){o[e]=t},d.register=d.define=function(t,r){if("object"==typeof t)for(var o in t)n.call(t,o)&&d.register(o,t[o]);else e[t]=r},d.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},d.brunch=!0,d._cache=r,t.require=d}}(),require.register("components/todo-app",function(t,e,r){"use strict";var o,n,i,s,u,l,c,a,d,h,f,p,g;h=e("mithril"),u=e("../redux").bindActionCreators,i=e("./todo-input"),s=e("./todo-item"),l=e("./utils").createComponent,f=e("../state/root").selectors,c=e("../state/filter").filterActions,g=e("../state/todos").todosActions,o={all:{path:"/",label:"All"},active:{path:"/active",label:"Active"},completed:{path:"/completed",label:"Completed"}},r.exports=l(n=function(){function t(t){var e;this.attrs=t,e=h.route.param("filter"),"active"!==e&&"completed"!==e&&(e&&h.route("/"),e="all"),this.attrs.dispatch(c.setFilter(e)),this.actions=u(g,this.attrs.dispatch)}return t.prototype.render=function(){var t,e;return t=this.attrs.getState(),e=f.getTodos(t),h("div",[d({title:"todos"},h(i,{onSubmit:this.actions.createTodo})),e.length>0?[p({state:t,actions:this.actions}),a({state:t,actions:this.actions})]:void 0])},t}()),d=function(t,e){var r;return r=t.title,h("header.header",[h("h1",r),e])},p=function(t){var e,r,o,n,i;return o=t.state,e=t.actions,r=f.hasActiveTodos(o),i=f.getVisibleTodos(o),h("section.main",[h("input#toggle-all.toggle-all",{type:"checkbox",checked:!r,onchange:e.toggleAllTodos}),h("label",{"for":"toggle-all"},"Mark all as complete"),h("ul.todo-list",function(){var t,r,o;for(o=[],t=0,r=i.length;r>t;t++)n=i[t],o.push(h(s,{todo:n,onToggle:e.toggleTodo,onRename:e.renameTodo,onDestroy:e.destroyTodo}));return o}())])},a=function(t){var e,r,n,i,s,u,l;return l=t.state,e=t.actions,s=f.getFilter(l),r=f.getActiveTodos(l),i=f.getCompletedTodos(l),h("footer.footer",[h("span.todo-count",[h("strong",r.length),1===r.length?" item left":" items left"]),h("ul.filters",function(){var t;t=[];for(u in o)n=o[u],t.push(h("li",[h("a",{"class":u===s?"selected":void 0,href:n.path,config:h.route},n.label)]));return t}()),i.length>0?h("button.clear-completed",{onclick:e.destroyCompletedTodos},"Clear completed"):void 0])}}),require.register("components/todo-input",function(t,e,r){"use strict";var o,n,i,s,u,l,c=function(t,e){return function(){return t.apply(e,arguments)}};s=e("mithril"),l=e("./utils"),i=l.createComponent,o=l.KeyCode,u=l.mx,r.exports=i(n=function(){function t(t){this.attrs=t,this.handleKeydown=c(this.handleKeydown,this),this.title=s.prop("")}return t.prototype.handleKeydown=function(t){var e;return t.keyCode===o.ENTER&&(e=this.title().trim())?(this.attrs.onSubmit(e),this.title("")):void 0},t.prototype.render=function(){return u("input.new-todo",{placeholder:"What needs to be done?",autofocus:!0,binds:["oninput","value",this.title],onkeydown:this.handleKeydown})},t}())}),require.register("components/todo-item",function(t,e,r){"use strict";var o,n,i,s,u,l,c,a=function(t,e){return function(){return t.apply(e,arguments)}};s=e("mithril"),l=e("./utils"),i=l.createComponent,o=l.KeyCode,u=l.mx,r.exports=i(n=function(){function t(t){this.attrs=t,this.handleKeydown=a(this.handleKeydown,this),this.handleBlur=a(this.handleBlur,this),this.handleDblclick=a(this.handleDblclick,this),this.handleDestroy=a(this.handleDestroy,this),this.handleToggle=a(this.handleToggle,this),this.title=s.prop(""),this.editing=s.prop(!1)}return t.prototype.handleToggle=function(){return this.attrs.onToggle(this.attrs.todo.id)},t.prototype.handleDestroy=function(){return this.attrs.onDestroy(this.attrs.todo.id)},t.prototype.handleDblclick=function(){return this.title(this.attrs.todo.title),this.editing(!0)},t.prototype.handleBlur=function(){return this.commitChanges()},t.prototype.handleKeydown=function(t){switch(t.keyCode){case o.ENTER:return this.commitChanges();case o.ESCAPE:return this.discardChanges()}},t.prototype.commitChanges=function(){var t;return this.editing(!1),(t=this.title().trim())?t!==this.attrs.todo.title?this.attrs.onRename(this.attrs.todo.id,t):void 0:this.attrs.onDestroy(this.attrs.todo.id)},t.prototype.discardChanges=function(){return this.title(this.attrs.todo.title),this.editing(!1)},t.prototype.render=function(){var t;return t="",this.editing()&&(t+=".editing"),this.attrs.todo.completed&&(t+=".completed"),s("li"+t,{key:this.attrs.todo.id},[this.editing()?u("input.edit",{config:c,binds:["oninput","value",this.title],onblur:this.handleBlur,onkeydown:this.handleKeydown}):s("div.view",[s("input.toggle",{type:"checkbox",checked:this.attrs.todo.completed,onchange:this.handleToggle}),s("label",{ondblclick:this.handleDblclick},this.attrs.todo.title),s("button.destroy",{onclick:this.handleDestroy})])])},t}()),c=function(t,e,r){return e?void 0:t.select()}}),require.register("components/utils",function(t,e,r){"use strict";var o;o=e("mithril"),r.exports={KeyCode:{ENTER:13,ESCAPE:27},createComponent:function(){var t;return t=function(t){return{controller:function(e,r){var o;return(o=t.prototype).setAttrs||(o.setAttrs=function(t,e){this.attrs=t,this.children=e}),new t(e,r)},view:function(t,e,r){return t.setAttrs(e,r),t.render()}}}}(),mx:function(){var t,e;return t={binds:function(t){var e,r,n,i;return i=t.binds,n=i[0],e=i[1],r=i[2],t[e]=r(),t[n]=o.withAttr(e,r),delete t.binds}},e=function(e,r,n){var i,s;for(i in t)s=t[i],null!=r[i]&&s(r);return o(e,r,n)}}()}}),require.register("main",function(t,e,r){"use strict";var o,n,i,s,u,l;s=e("mithril"),o=e("./components/todo-app"),i=e("./state/store").configureStore,l=i(),u=document.getElementById("todoapp"),n=s.component(o,l),s.route.mode="hash",s.route(u,"/",{"/":n,"/:filter":n})}),require.register("redux",function(t,e,r){r.exports=e("redux/dist/redux.min")}),require.register("state/filter",function(t,e,r){"use strict";var o,n;o=e("./utils").createAction,t.filterActions={setFilter:o("SET_FILTER","filter")},n="all",t.filterReducer=function(t,e){switch(null==t&&(t=n),e.type){case"SET_FILTER":return e.filter;default:return t}},t.filterSelectors={getFilter:function(t){return t}}}),require.register("state/root",function(t,e,r){"use strict";var o,n,i,s,u,l,c,a;o=e("../redux").combineReducers,s=e("./filter"),n=s.filterReducer,i=s.filterSelectors,u=e("./todos"),c=u.todosReducer,a=u.todosSelectors,t.reducer=o({filter:n,todos:c}),t.configureState=function(t){var e;return e=t.todos,{filter:n(void 0,{}),todos:c(e,{})}},t.selectors=l={},l.getFilter=function(t){return i.getFilter(t.filter)},l.getTodos=function(t){return a.getTodos(t.todos)},l.getActiveTodos=function(t){var e;return e=l.getTodos(t),a.getActiveTodos(e)},l.getCompletedTodos=function(t){var e;return e=l.getTodos(t),a.getCompletedTodos(e)},l.getVisibleTodos=function(t){switch(l.getFilter(t)){case"all":return l.getTodos(t);case"active":return l.getActiveTodos(t);case"completed":return l.getCompletedTodos(t)}},l.hasActiveTodos=function(t){var e;return e=l.getTodos(t),a.hasActiveTodos(e)}}),require.register("state/storage",function(t,e,r){"use strict";var o,n;o="redux-state",n=function(t){return t},t.attachStorage=function(t){var e,r,i,s,u,l,c,a;return c=null!=(i=t.storage)?i:window.localStorage,r=null!=(s=t.key)?s:o,e=null!=(u=t.fromStorage)?u:n,a=null!=(l=t.toStorage)?l:n,function(t){return function(o,n){var i,s,u,l,d;return s=c.getItem(r),null!=s?(u=JSON.parse(s),i=e(u)):(u=null,i=n),d=t(o,i),d.subscribe(l=function(){var t,e,o;if(o=a(d.getState()),o!==u){u=o;try{return c.setItem(r,JSON.stringify(o))}catch(e){return t=e,console.error("Can't save",t)}}}),d}}}}),require.register("state/store",function(t,e,r){"use strict";var o,n,i,s,u,l,c;u=e("../redux"),o=u.applyMiddleware,i=u.compose,s=u.createStore,c=e("redux-thunk")["default"],l=e("./root"),n=e("./storage").attachStorage,t.configureStore=function(){var t;return t=l.reducer(void 0,{}),s(l.reducer,t,i(n({key:"todos-mithril-redux",fromStorage:function(t){return l.configureState({todos:t})},toStorage:l.selectors.getTodos}),o(c)))}}),require.register("state/todos",function(t,e,r){"use strict";var o,n,i,s,u,l,c,a,d,h,f;u=e("reselect").createSelector,a=e("./utils"),s=a.createAction,h=a.setItem,f=a.setProperties,n=a.UUIDv4,t.Todo=o=function(t,e){return{id:n(),title:t,completed:null!=e?!!e:!1}},o.isActive=function(t){return!t.completed},o.isCompleted=function(t){return t.completed},t.todosActions={createTodo:function(){var t;return t=s("ADD_TODO","todo"),function(e,r){return function(n){return n(t(o(e,r)))}}}(),toggleTodo:s("TOGGLE_TODO","id"),renameTodo:s("RENAME_TODO","id","title"),destroyTodo:s("DESTROY_TODO","id"),toggleAllTodos:s("TOGGLE_ALL_TODOS"),destroyCompletedTodos:s("DESTROY_COMPLETED_TODOS")},c=function(){var t,e,r,n;for(r=[["Taste JavaScript",!0],["Buy a unicorn",!1]],n=[],t=0,e=r.length;e>t;t++)i=r[t],n.push(o.apply(null,i));return n}(),t.todosReducer=function(t,e){var r,o,n,i,s,u;return null==t&&(t=c),i=function(){var i,c;switch(e.type){case"ADD_TODO":return t.concat([e.todo]);case"TOGGLE_TODO":if(i=l(t,e.id),s=i[0],n=i[1],s)return s=f(s,{completed:!s.completed}),h(t,n,s);break;case"RENAME_TODO":if(c=l(t,e.id),s=c[0],n=c[1],s&&e.title!==s.title)return s=f(s,{title:e.title}),h(t,n,s);break;case"DESTROY_TODO":if(u=t.filter(function(t){return t.id!==e.id}),u.length<t.length)return u;break;case"TOGGLE_ALL_TODOS":if(t.length>0)return o=d.hasActiveTodos(t),t.map(function(t){return f(t,{completed:o})});break;case"DESTROY_COMPLETED_TODOS":if(r=d.getActiveTodos(t),r.length<t.length)return r}}(),i||t},l=function(t,e){var r,o,n,i;for(o=r=0,n=t.length;n>r;o=++r)if(i=t[o],i.id===e)return[i,o];return[null,-1]},t.todosSelectors=d={},d.getTodos=function(t){return t},d.getActiveTodos=u([d.getTodos],function(t){return t.filter(o.isActive)}),d.getCompletedTodos=u([d.getTodos],function(t){return t.filter(o.isCompleted)}),d.hasActiveTodos=function(t){var e;return e=d.getActiveTodos(t),e.length>0}}),require.register("state/utils",function(t,e,r){"use strict";var o=[].slice;r.exports={createAction:function(){var t,e;return e=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],function(){var r,n,i,s,u,l;for(l=1<=arguments.length?o.call(arguments,0):[],r={type:e},i=n=0,u=t.length;u>n;i=++n)s=t[i],r[s]=l[i];return r}},setItem:function(t,e,r){return t=t.slice(),t[e]=r,t},setProperties:function(t,e,r){var o;return null!=r?(o={},o[e]=r):o=e,Object.assign({},t,o)},UUIDv4:function(){var t,e,r,o;return e=[8,4,4,4,12],o=2,r=3,t=function(){var t,n,i,s,u;return u=function(){var u,l,c;for(c=[],i=u=0,l=e.length;l>u;i=++u)s=e[i],n=crypto.getRandomValues(new Uint8Array(s)),i===o&&(n[0]=4),i===r&&(n[0]=8+n[0]%4),c.push(function(){var e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push((t%16).toString(16));return o}().join(""));return c}(),u.join("-")}}()}}),require("main");