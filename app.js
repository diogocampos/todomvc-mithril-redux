!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},o={},n={}.hasOwnProperty,i=function(t,e){var r=o[t]||o[t+"/index.js"];return r||t},s=/^\.\.?(\/|$)/,u=function(t,e){for(var r,o=[],n=(s.test(e)?t+"/"+e:e).split("/"),i=0,u=n.length;u>i;i++)r=n[i],".."===r?o.pop():"."!==r&&""!==r&&o.push(r);return o.join("/")},c=function(t){return t.split("/").slice(0,-1).join("/")},l=function(e){return function(r){var o=u(c(e),r);return t.require(o,e)}},a=function(t,e){var o={id:t,exports:{}};return r[t]=o,e(o.exports,l(t),o),o.exports},d=function(t,o){null==o&&(o="/");var s=i(t,o);if(n.call(r,s))return r[s].exports;if(n.call(e,s))return a(s,e[s]);var c=u(s,"./index");if(n.call(r,c))return r[c].exports;if(n.call(e,c))return a(c,e[c]);throw new Error('Cannot find module "'+t+'" from "'+o+'"')};d.alias=function(t,e){o[e]=t},d.register=d.define=function(t,r){if("object"==typeof t)for(var o in t)n.call(t,o)&&d.register(o,t[o]);else e[t]=r},d.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},d.brunch=!0,d._cache=r,t.require=d}}(),require.register("components/todo-app",function(t,e,r){"use strict";var o,n,i,s,u,c,l,a,d,f,h,p,g;f=e("mithril"),u=e("../redux").bindActionCreators,i=e("./todo-input"),s=e("./todo-item"),c=e("./utils").createComponent,h=e("../state/root").selectors,l=e("../state/filter").filterActions,g=e("../state/todos").todosActions,o={all:{path:"/",label:"All"},active:{path:"/active",label:"Active"},completed:{path:"/completed",label:"Completed"}},r.exports=c(n=function(){function t(t){var e;this.attrs=t,e=f.route.param("filter"),"active"!==e&&"completed"!==e&&(e&&f.route("/"),e="all"),this.attrs.dispatch(l.setFilter(e)),this.actions=u(g,this.attrs.dispatch)}return t.prototype.render=function(){var t,e;return t=this.attrs.getState(),e=h.getTodos(t),f("div",[d({title:"todos"},f(i,{onSubmit:this.actions.createTodo})),e.length>0?[p({state:t,actions:this.actions}),a({state:t,actions:this.actions})]:void 0])},t}()),d=function(t,e){var r;return r=t.title,f("header.header",[f("h1",r),e])},p=function(t){var e,r,o,n,i;return o=t.state,e=t.actions,r=h.hasActiveTodos(o),i=h.getVisibleTodos(o),f("section.main",[f("input#toggle-all.toggle-all",{type:"checkbox",checked:!r,onchange:e.toggleAllTodos}),f("label",{"for":"toggle-all"},"Mark all as complete"),f("ul.todo-list",function(){var t,r,o;for(o=[],t=0,r=i.length;r>t;t++)n=i[t],o.push(f(s,{todo:n,onToggle:e.toggleTodo,onRename:e.renameTodo,onDestroy:e.destroyTodo}));return o}())])},a=function(t){var e,r,n,i,s,u,c;return c=t.state,e=t.actions,s=h.getFilter(c),r=h.getActiveTodos(c),i=h.getCompletedTodos(c),f("footer.footer",[f("span.todo-count",[f("strong",r.length),1===r.length?" item left":" items left"]),f("ul.filters",function(){var t;t=[];for(u in o)n=o[u],t.push(f("li",[f("a",{"class":u===s?"selected":void 0,href:n.path,config:f.route},n.label)]));return t}()),i.length>0?f("button.clear-completed",{onclick:e.destroyCompletedTodos},"Clear completed"):void 0])}}),require.register("components/todo-input",function(t,e,r){"use strict";var o,n,i,s,u,c;s=e("mithril"),c=e("./utils"),i=c.createComponent,o=c.KeyCode,u=c.mx,r.exports=i(n=function(){function t(t){this.attrs=t,this.title=s.prop("")}return t.prototype.handleKeydown=function(t){var e;return t.keyCode===o.ENTER&&(e=this.title().trim())?(this.attrs.onSubmit(e),this.title("")):void 0},t.prototype.render=function(){return u("input.new-todo",{placeholder:"What needs to be done?",autofocus:!0,binds:["oninput","value",this.title],onkeydown:this.handleKeydown})},t}())}),require.register("components/todo-item",function(t,e,r){"use strict";var o,n,i,s,u,c,l;s=e("mithril"),c=e("./utils"),i=c.createComponent,o=c.KeyCode,u=c.mx,r.exports=i(n=function(){function t(t){this.attrs=t,this.title=s.prop(""),this.editing=s.prop(!1)}return t.prototype.handleToggle=function(){return this.attrs.onToggle(this.attrs.todo.id)},t.prototype.handleDestroy=function(){return this.attrs.onDestroy(this.attrs.todo.id)},t.prototype.handleDblclick=function(){return this.title(this.attrs.todo.title),this.editing(!0)},t.prototype.handleBlur=function(){return this.commitChanges()},t.prototype.handleKeydown=function(t){switch(t.keyCode){case o.ENTER:return this.commitChanges();case o.ESCAPE:return this.discardChanges()}},t.prototype.commitChanges=function(){var t;return this.editing(!1),(t=this.title().trim())?t!==this.attrs.todo.title?this.attrs.onRename(this.attrs.todo.id,t):void 0:this.attrs.onDestroy(this.attrs.todo.id)},t.prototype.discardChanges=function(){return this.title(this.attrs.todo.title),this.editing(!1)},t.prototype.render=function(){var t;return t="",this.editing()&&(t+=".editing"),this.attrs.todo.completed&&(t+=".completed"),s("li"+t,{key:this.attrs.todo.id},[this.editing()?u("input.edit",{config:l,binds:["oninput","value",this.title],onblur:this.handleBlur,onkeydown:this.handleKeydown}):s("div.view",[s("input.toggle",{type:"checkbox",checked:this.attrs.todo.completed,onchange:this.handleToggle}),s("label",{ondblclick:this.handleDblclick},this.attrs.todo.title),s("button.destroy",{onclick:this.handleDestroy})])])},t}()),l=function(t,e,r){return e?void 0:t.select()}}),require.register("components/utils",function(t,e,r){"use strict";var o;o=e("mithril"),r.exports={KeyCode:{ENTER:13,ESCAPE:27},createComponent:function(){var t,e;return t=function(t){var e,r;for(r in t)e=t[r],0===r.indexOf("handle")&&"function"==typeof e&&(t[r]=e.bind(t));return t},e=function(e){return{controller:function(r,o){var n;return(n=e.prototype).setAttrs||(n.setAttrs=function(t,e){this.attrs=t,this.children=e}),t(new e(r,o))},view:function(t,e,r){return t.setAttrs(e,r),t.render()}}}}(),mx:function(){var t,e;return t={binds:function(t){var e,r,n,i;return i=t.binds,n=i[0],e=i[1],r=i[2],t[e]=r(),t[n]=o.withAttr(e,r),delete t.binds}},e=function(e,r,n){var i,s;for(i in t)s=t[i],null!=r[i]&&s(r);return o(e,r,n)}}()}}),require.register("main",function(t,e,r){"use strict";var o,n,i,s,u,c;s=e("mithril"),o=e("./components/todo-app"),i=e("./state/store").configureStore,c=i(),u=document.getElementById("todoapp"),n=s.component(o,c),s.route.mode="hash",s.route(u,"/",{"/":n,"/:filter":n})}),require.register("redux",function(t,e,r){r.exports=e("redux/dist/redux.min")}),require.register("state/filter",function(t,e,r){"use strict";var o,n;o=e("./utils").createAction,t.filterActions={setFilter:o("SET_FILTER","filter")},n="all",t.filterReducer=function(t,e){switch(null==t&&(t=n),e.type){case"SET_FILTER":return e.filter;default:return t}},t.filterSelectors={getFilter:function(t){return t}}}),require.register("state/root",function(t,e,r){"use strict";var o,n,i,s,u,c,l,a;o=e("../redux").combineReducers,s=e("./filter"),n=s.filterReducer,i=s.filterSelectors,u=e("./todos"),l=u.todosReducer,a=u.todosSelectors,t.reducer=o({filter:n,todos:l}),t.configureState=function(t){var e;return e=t.todos,{filter:n(void 0,{}),todos:l(e,{})}},t.selectors=c={},c.getFilter=function(t){return i.getFilter(t.filter)},c.getTodos=function(t){return a.getTodos(t.todos)},c.getActiveTodos=function(t){var e;return e=c.getTodos(t),a.getActiveTodos(e)},c.getCompletedTodos=function(t){var e;return e=c.getTodos(t),a.getCompletedTodos(e)},c.getVisibleTodos=function(t){switch(c.getFilter(t)){case"all":return c.getTodos(t);case"active":return c.getActiveTodos(t);case"completed":return c.getCompletedTodos(t)}},c.hasActiveTodos=function(t){var e;return e=c.getTodos(t),a.hasActiveTodos(e)}}),require.register("state/storage",function(t,e,r){"use strict";var o,n;o="redux-state",n=function(t){return t},t.attachStorage=function(t){var e,r,i,s,u,c,l,a;return l=null!=(i=t.storage)?i:localStorage,r=null!=(s=t.key)?s:o,e=null!=(u=t.fromStorage)?u:n,a=null!=(c=t.toStorage)?c:n,function(t){return function(o,n){var i,s,u,c,d;return s=l.getItem(r),i=null!=s?e(JSON.parse(s)):n,d=t(o,i),u=null!=s?a(i):null,c=function(){var t,e,o;if(o=a(d.getState()),o!==u){u=o;try{return l.setItem(r,JSON.stringify(o))}catch(e){return t=e,console.error("Can't save",t)}}},d.subscribe(c),d}}}}),require.register("state/store",function(t,e,r){"use strict";var o,n,i,s,u,c,l;u=e("../redux"),o=u.applyMiddleware,i=u.compose,s=u.createStore,l=e("redux-thunk")["default"],c=e("./root"),n=e("./storage").attachStorage,t.configureStore=function(){var t;return t=c.reducer(void 0,{}),s(c.reducer,t,i(n({key:"todos-mithril-redux",fromStorage:function(t){return c.configureState({todos:t})},toStorage:c.selectors.getTodos}),o(l)))}}),require.register("state/todos",function(t,e,r){"use strict";var o,n,i,s,u,c,l,a,d,f,h,p,g,v,m,T,y,A;c=e("reselect").createSelector,p=e("./utils"),u=p.createAction,m=p.setItem,T=p.setProperties,n=p.UUIDv4,t.Todo=o=function(t,e){return{id:n(),title:t,completed:null!=e?e:!1}},o.isActive=function(t){return!t.completed},o.isCompleted=function(t){return t.completed},i=u("ADD_TODO","todo"),A=u("TOGGLE_TODO","id"),g=u("RENAME_TODO","id","title"),d=u("DESTROY_TODO","id"),y=u("TOGGLE_ALL_TODOS"),a=u("DESTROY_COMPLETED_TODOS"),l=function(t,e){return function(r){return r(i(o(t,e)))}},t.todosActions={createTodo:l,toggleTodo:A,renameTodo:g,destroyTodo:d,toggleAllTodos:y,destroyCompletedTodos:a},h=function(){var t,e,r,n;for(r=[["Taste JavaScript",!0],["Buy a unicorn",!1]],n=[],t=0,e=r.length;e>t;t++)s=r[t],n.push(o.apply(null,s));return n}(),t.todosReducer=function(t,e){var r,o,n,i,s,u;return null==t&&(t=h),i=function(){var i,c;switch(e.type){case"ADD_TODO":return t.concat([e.todo]);case"TOGGLE_TODO":if(i=f(t,e.id),s=i[0],n=i[1],s)return s=T(s,{completed:!s.completed}),m(t,n,s);break;case"RENAME_TODO":if(c=f(t,e.id),s=c[0],n=c[1],s&&e.title!==s.title)return s=T(s,{title:e.title}),m(t,n,s);break;case"DESTROY_TODO":if(u=t.filter(function(t){return t.id!==e.id}),u.length<t.length)return u;break;case"TOGGLE_ALL_TODOS":if(t.length>0)return o=v.hasActiveTodos(t),t.map(function(t){return T(t,{completed:o})});break;case"DESTROY_COMPLETED_TODOS":if(r=v.getActiveTodos(t),r.length<t.length)return r}}(),i||t},f=function(t,e){var r,o,n,i;for(o=r=0,n=t.length;n>r;o=++r)if(i=t[o],i.id===e)return[i,o];return[null,-1]},t.todosSelectors=v={},v.getTodos=function(t){return t},v.getActiveTodos=c([v.getTodos],function(t){return t.filter(o.isActive)}),v.getCompletedTodos=c([v.getTodos],function(t){return t.filter(o.isCompleted)}),v.hasActiveTodos=function(t){var e;return e=v.getActiveTodos(t),e.length>0}}),require.register("state/utils",function(t,e,r){"use strict";var o=[].slice;r.exports={createAction:function(){var t,e;return e=arguments[0],t=2<=arguments.length?o.call(arguments,1):[],function(){var r,n,i,s,u,c;for(c=1<=arguments.length?o.call(arguments,0):[],r={type:e},i=n=0,u=t.length;u>n;i=++n)s=t[i],r[s]=c[i];return r}},setItem:function(t,e,r){return t=t.slice(),t[e]=r,t},setProperties:function(t,e,r){var o;return null!=r?(o={},o[e]=r):o=e,Object.assign({},t,o)},UUIDv4:function(){var t,e,r,o;return e=[8,4,4,4,12],o=2,r=3,t=function(){var t,n,i,s,u;return u=function(){var u,c,l;for(l=[],i=u=0,c=e.length;c>u;i=++u)s=e[i],n=crypto.getRandomValues(new Uint8Array(s)),i===o&&(n[0]=4),i===r&&(n[0]=8+n[0]%4),l.push(function(){var e,r,o;for(o=[],e=0,r=n.length;r>e;e++)t=n[e],o.push((t%16).toString(16));return o}().join(""));return l}(),u.join("-")}}()}}),require("main");